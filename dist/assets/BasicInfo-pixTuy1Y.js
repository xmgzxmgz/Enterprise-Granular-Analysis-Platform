import{d as z,X as D,p as o,x as O,Z as X,c as k,b as l,w as s,r as g,o as h,a as p,e as Z,g as B,$ as j,i as r,t as N,u as F,_ as G}from"./index-BT2JZAz1.js";import{e as H,f as J}from"./api-CljNWEiS.js";const L={class:"wrap"},P={class:"search-wrap"},Q={key:0,class:"intro-grid"},W={class:"intro-section"},Y={class:"intro-section"},ee=z({__name:"BasicInfo",setup(te){const M=D(),$=M.query.category,_=M.query.focusName,n=o([]),S=o(!1),f=o([]),C=o({});o({}),o({}),o({}),o({}),o({}),o(!1),o(!1);const q=F(),y=o(""),E=async(i,e)=>{const c=i.trim(),a=n.value.map(t=>t.name).filter(t=>!c||t.includes(c)).slice(0,10).map(t=>({value:t}));e(a)},I=i=>{y.value=i.value,x()},x=()=>{const i=y.value.trim();i&&q.push({name:"企业详情",query:{name:i}})};o({}),o({}),o({});const K=o([]),w=o(!1),T=o(null);return O(async()=>{try{const a=await H($);if(n.value=((a==null?void 0:a.rows)||[]).map(t=>({...t,isNew:t.isNew??t.origin==="model",tags:t.tags??[],manualTags:t.manualTags??t.tagsManual??t.tags??[],modelTags:t.modelTags??t.tagsModel??[]})),_){const t=n.value.findIndex(u=>u.name===_);if(t>0){const[u]=n.value.splice(t,1);n.value.unshift(u)}}}catch(a){S.value=!0,X("后端不可联通或错误",String((a==null?void 0:a.message)??"网络错误"))}try{const a=await J();f.value=((a==null?void 0:a.rows)||[]).map(t=>t.name??t)}catch{}const i=["价格指纹","物流指纹","属地指纹","两用物项","高风险","中风险","低风险","极高风险","合规预警","异常金额","频率异常","出口波动","违规记录","监管关注","供应链异常","黑名单接触"];f.value=Array.from(new Set([...f.value,...i]));const e=M.query.only;if(_&&e==="1"&&(n.value=n.value.filter(a=>a.name===_)),n.value.length<50&&!(_&&e==="1")){const a=50-n.value.length,t=["制造业","医药","材料","能源","电子","物流","金融","服务"];for(let u=0;u<a;u++){const v=`样例企业-${String(n.value.length+u+1).padStart(2,"0")}`,b=Math.max(1,Math.floor(Math.random()*60)+20),d=Math.min(b,99),m=100-d,V=(R,A)=>Array.from({length:R},(ae,U)=>`${f.value[Math.floor(Math.random()*f.value.length)]}-${A}${String(U+1).padStart(3,"0")}`).filter(Boolean);n.value.push({name:v,category:t[Math.floor(Math.random()*t.length)],region:["华东","华中","华北","东北","西南","西北"][Math.floor(Math.random()*6)],risk:["低","中","高","极高"][Math.floor(Math.random()*4)],origin:"existing",isNew:!1,manualTags:V(d,"M"),modelTags:V(m,"B")})}}const c=f.value.length?f.value:i;n.value.forEach(a=>{const t=a.manualTags||[],u=a.modelTags||[],v=t.length+u.length;if(v<100){const b=100-v;for(let d=0;d<b;d++){const m=c[Math.floor(Math.random()*c.length)];u.push(`${m}-B${String(d+1).padStart(3,"0")}`)}}a.manualTags=t,a.modelTags=u}),n.value.forEach(a=>C.value[a.name]=[...a.manualTags||a.tags||[]]),K.value=n.value.map(a=>a.name)}),(i,e)=>{const c=g("el-alert"),a=g("el-autocomplete"),t=g("el-descriptions-item"),u=g("el-descriptions"),v=g("el-button"),b=g("el-dialog"),d=g("el-card");return h(),k("div",L,[l(d,null,{default:s(()=>[e[17]||(e[17]=p("div",{class:"title"},"企业基本信息搜索",-1)),S.value?(h(),Z(c,{key:0,type:"error",title:"后端不可联通或错误","show-icon":"",closable:""})):B("",!0),p("div",P,[l(a,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=m=>y.value=m),class:"search-input",size:"large","fetch-suggestions":E,placeholder:"输入企业名称进行搜索（支持联想）",clearable:"","trigger-on-focus":"",debounce:80,onSelect:I,onKeyup:j(x,["enter"])},null,8,["modelValue"]),e[3]||(e[3]=p("div",{class:"hint"},"搜索后将跳转至独立结果页并按当前排版展示企业",-1))]),l(b,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=m=>w.value=m),title:"企业信息介绍",width:"860px","append-to-body":""},{footer:s(()=>[l(v,{onClick:e[1]||(e[1]=m=>w.value=!1)},{default:s(()=>[...e[16]||(e[16]=[r("关闭",-1)])]),_:1})]),default:s(()=>[T.value?(h(),k("div",Q,[p("div",W,[e[12]||(e[12]=p("div",{class:"intro-title"},"基本属性",-1)),l(u,{column:4,border:""},{default:s(()=>[l(t,{label:"成立日期"},{default:s(()=>[...e[4]||(e[4]=[r("—",-1)])]),_:1}),l(t,{label:"注册地"},{default:s(()=>[...e[5]||(e[5]=[r("—",-1)])]),_:1}),l(t,{label:"注册资本"},{default:s(()=>[...e[6]||(e[6]=[r("—",-1)])]),_:1}),l(t,{label:"实收资本"},{default:s(()=>[...e[7]||(e[7]=[r("—",-1)])]),_:1}),l(t,{label:"企业性质"},{default:s(()=>[...e[8]||(e[8]=[r("—",-1)])]),_:1}),l(t,{label:"监管机关"},{default:s(()=>[...e[9]||(e[9]=[r("—",-1)])]),_:1}),l(t,{label:"高管人员"},{default:s(()=>[...e[10]||(e[10]=[r("—",-1)])]),_:1}),l(t,{label:"法人"},{default:s(()=>[...e[11]||(e[11]=[r("—",-1)])]),_:1})]),_:1})]),p("div",Y,[e[15]||(e[15]=p("div",{class:"intro-title"},"行业属性",-1)),l(u,{column:4,border:""},{default:s(()=>[l(t,{label:"生产/贸易/混合型"},{default:s(()=>[...e[13]||(e[13]=[r("—",-1)])]),_:1}),l(t,{label:"产业类别"},{default:s(()=>[r(N(T.value.category),1)]),_:1}),l(t,{label:"专精特新"},{default:s(()=>[...e[14]||(e[14]=[r("—",-1)])]),_:1}),l(t,{label:"地区"},{default:s(()=>[r(N(T.value.region),1)]),_:1})]),_:1})])])):B("",!0)]),_:1},8,["modelValue"])]),_:1})])}}}),ne=G(ee,[["__scopeId","data-v-c962e63f"]]);export{ne as default};
