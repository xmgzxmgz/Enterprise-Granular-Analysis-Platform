import{d as $}from"./api-CljNWEiS.js";import{d as C,p as d,x as P,f as v,c as f,b as o,w as i,r as l,o as n,a as y,e as r,F,y as N,_ as U}from"./index-BT2JZAz1.js";const A={class:"wrap"},E={class:"toolbar"},I=C({__name:"Placeholder",setup(L){const p=d(""),s=d(void 0),u=d([]),m=d(!1);P(async()=>{try{const t=await $();u.value=((t==null?void 0:t.rows)||t||[]).map(e=>({name:e.name||e.title||"",dept:e.dept||e.department||e.org||"",tag:e.tag||e.category||e.type||"",desc:e.desc||e.description||""}))}catch{m.value=!0}});const b=v(()=>{const t=new Set;for(const e of u.value)e.tag&&t.add(e.tag);return Array.from(t)}),_=v(()=>{const t=p.value.trim();return u.value.filter(e=>(!s.value||e.tag===s.value)&&(!t||`${e.name} ${e.dept} ${e.tag} ${e.desc}`.includes(t)))});return(t,e)=>{const g=l("el-input"),w=l("el-option"),h=l("el-select"),k=l("el-alert"),x=l("el-empty"),c=l("el-table-column"),V=l("el-table"),B=l("el-card");return n(),f("div",A,[o(B,null,{default:i(()=>[e[2]||(e[2]=y("div",{class:"title"},"政策惠企",-1)),y("div",E,[o(g,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),placeholder:"搜索政策名称/标签",style:{"max-width":"240px"}},null,8,["modelValue"]),o(h,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value=a),placeholder:"选择标签",style:{"max-width":"200px"},clearable:""},{default:i(()=>[(n(!0),f(F,null,N(b.value,a=>(n(),r(w,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),m.value?(n(),r(k,{key:0,type:"error",title:"后端不可联通或错误","show-icon":"",closable:""})):_.value.length?(n(),r(V,{key:2,data:_.value,height:"420"},{default:i(()=>[o(c,{prop:"name",label:"政策名称",width:"240"}),o(c,{prop:"dept",label:"部门",width:"160"}),o(c,{prop:"tag",label:"标签",width:"120"}),o(c,{prop:"desc",label:"说明"})]),_:1},8,["data"])):(n(),r(x,{key:1,description:"后端无数据或未匹配到结果"}))]),_:1})])}}}),S=U(I,[["__scopeId","data-v-eba656c9"]]);export{S as default};
