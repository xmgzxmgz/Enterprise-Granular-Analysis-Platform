import{d as x,p as f,X as B,x as C,c as v,b as n,w as p,r,o as c,a as b,e as _,t as w,F as E,y as N,G as L,i as M,_ as S}from"./index-BT2JZAz1.js";import{e as V}from"./api-CljNWEiS.js";const z={class:"wrap"},F={class:"title"},I={class:"tags-inline"},q=x({__name:"EnterpriseList",setup(D){const k=B(),t=f(String(k.query.tag||"")),d=f([]),y=f(!1);return C(async()=>{try{const i=await V(),m=[];for(const e of(i==null?void 0:i.rows)||[]){const l=e.manualTags||e.tagsManual||[],a=e.modelTags||e.tagsModel||[],g=new Set([...l||[],...a||[]]);if(!t.value||!g.has(t.value))continue;const o=[];l.includes(t.value)?o.push({name:t.value,color:"grey"}):a.includes(t.value)&&o.push({name:t.value,color:"blue"});for(const s of l)s!==t.value&&o.push({name:s,color:"grey"});for(const s of a)s!==t.value&&o.push({name:s,color:"blue"});m.push({name:e.name,category:e.category,region:e.region,risk:e.risk,manualTags:l,modelTags:a,displayTags:o})}d.value=m}catch{y.value=!0}}),(i,m)=>{const e=r("el-alert"),l=r("el-empty"),a=r("el-table-column"),g=r("el-tag"),o=r("el-table"),s=r("el-card");return c(),v("div",z,[n(s,null,{default:p(()=>[b("div",F,"标签企业列表："+w(t.value),1),y.value?(c(),_(e,{key:0,type:"error",title:"后端不可联通或错误","show-icon":"",closable:""})):d.value.length?(c(),_(o,{key:2,data:d.value,height:"520"},{default:p(()=>[n(a,{prop:"name",label:"企业",width:"200"}),n(a,{prop:"category",label:"类别",width:"120"}),n(a,{prop:"region",label:"地区",width:"120"}),n(a,{prop:"risk",label:"风险等级",width:"120"}),n(a,{label:"标签","min-width":"420"},{default:p(({row:h})=>[b("div",I,[(c(!0),v(E,null,N(h.displayTags,(u,T)=>(c(),_(g,{key:h.name+"-"+T,size:"small",class:L(u.color==="grey"?"tag-grey":""),type:u.color==="grey"?"info":"primary",effect:u.color==="grey"?"plain":void 0},{default:p(()=>[M(w(u.name),1)]),_:2},1032,["class","type","effect"]))),128))])]),_:1})]),_:1},8,["data"])):(c(),_(l,{key:1,description:"无企业拥有该标签或后端无数据"}))]),_:1})])}}}),X=S(q,[["__scopeId","data-v-fb7d8661"]]);export{X as default};
