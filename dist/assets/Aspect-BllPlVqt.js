import{i as k}from"./index-Bb6yjXMn.js";import{e as w}from"./api-CljNWEiS.js";import{d as A,p,x as B,c as g,b as r,w as m,r as i,o as b,a as _,F as C,y as N,e as E,i as F,_ as I}from"./index-BT2JZAz1.js";const R={class:"wrap"},S={class:"toolbar"},U={class:"charts"},L=A({__name:"Aspect",setup(M){const v=p([]),d=p([]),n=p("价格优势"),f=p(null),x=o=>o.split("").reduce((e,t)=>(e*131+t.charCodeAt(0))%9973,7),V=(o,e)=>{const t=x(o+e),s=60+t%30,c=50+t%40,u=50+t*3%40;return{score:s,price:c,logistics:u}},y=()=>{if(!f.value)return;const o=k(f.value),e=d.value.length?d.value:v.value.slice(0,3),t=e.map(a=>V(a,n.value)),s=n.value==="价格优势"?["价格指数","综合得分"]:["物流指数","综合得分"],c=n.value==="价格优势"?t.map(a=>a.price):t.map(a=>a.logistics),u=t.map(a=>a.score);o.setOption({title:{text:`企业${n.value}对比`,left:"center"},tooltip:{trigger:"axis"},legend:{data:s},xAxis:{type:"category",data:e},yAxis:{type:"value"},series:[{name:s[0],type:"bar",data:c,itemStyle:{color:"#3b82f6"}},{name:s[1],type:"line",data:u}]})};return B(async()=>{try{const o=await w();v.value=((o==null?void 0:o.rows)||[]).map(e=>e.name)}catch{}y()}),(o,e)=>{const t=i("el-option"),s=i("el-select"),c=i("el-radio-button"),u=i("el-radio-group"),a=i("el-button"),h=i("el-card");return b(),g("div",R,[r(h,null,{default:m(()=>[e[3]||(e[3]=_("div",{class:"title"},"切面分析",-1)),_("div",S,[r(s,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),multiple:"",placeholder:"选择企业",style:{"min-width":"300px"}},{default:m(()=>[(b(!0),g(C,null,N(v.value,l=>(b(),E(t,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(u,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value=l)},{default:m(()=>[r(c,{label:"价格优势"}),r(c,{label:"物流优势"})]),_:1},8,["modelValue"]),r(a,{onClick:y},{default:m(()=>[...e[2]||(e[2]=[F("对比分析",-1)])]),_:1})]),_("div",U,[_("div",{ref_key:"chartRef",ref:f,class:"chart"},null,512)])]),_:1})])}}}),j=I(L,[["__scopeId","data-v-8d08defe"]]);export{j as default};
